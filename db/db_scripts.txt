CREATE TABLE IF NOT EXISTS `customer` (
  `customer_id` BIGINT AUTO_INCREMENT,
  `customer_type` enum('individual','organization') NOT NULL ,
  `address` varchar(150),
  `phone_number` varchar(15),
  `email` VARCHAR(45) UNIQUE NOT NULL,
  PRIMARY KEY (`customer_id`)
);
CREATE INDEX idx_email ON customer (email);


CREATE TABLE IF NOT EXISTS `individual` (
  `individual_id` BIGINT,
  `first_name` varchar(15),
  `last_name` varchar(15),
  `nic` varchar(13) UNIQUE NOT
      NULL,
  `dob` date,
  PRIMARY KEY (`individual_id`),
  FOREIGN KEY (`individual_id`) REFERENCES customer(customer_id)
);
/*index for nic*/
CREATE INDEX idx_nic ON individual (nic);



CREATE TABLE IF NOT EXISTS `organization` (
  `organization_id` BIGINT,
  `name` varchar(15),
  `organization_reg_no` varchar(15) UNIQUE NOT NULL,
  PRIMARY KEY (`organization_id`),
  FOREIGN KEY (`organization_id`) REFERENCES customer(`customer_id`)
);
CREATE INDEX idx_org_reg_no ON organization (organization_reg_no);


CREATE TABLE IF NOT EXISTS `customer_credentials` (
  `email` VARCHAR(45),
  `pw_hash` VARCHAR(255),
  PRIMARY KEY (`email`),
  FOREIGN KEY (`email`) REFERENCES customer(`email`)
);

